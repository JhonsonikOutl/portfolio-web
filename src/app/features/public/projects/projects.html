<!-- Loading -->
<div *ngIf="loading()" class="loading-container">
    <div class="loading"></div>
</div>

<!-- Error -->
<div *ngIf="error()" class="error-container">
    <div class="alert-error">
        <span>{{ error() }}</span>
    </div>
</div>

<!-- Projects Section -->
<section *ngIf="!loading()" class="projects-section">
    <div class="container">

        <!-- Header -->
        <div class="section-header">
            <h1 class="section-title">Mis Proyectos</h1>
            <p class="section-subtitle">
                Explora algunos de los proyectos en los que he trabajado
            </p>
        </div>

        <!-- Filters -->
        <div class="filters">
            <button *ngFor="let cat of categories" (click)="filterByCategory(cat.id)"
                [class.active]="selectedCategory() === cat.id" class="filter-btn">
                {{ cat.label }}
            </button>
        </div>

        <!-- Projects Grid -->
        <div class="projects-grid">
            <div *ngFor="let project of filteredProjects()" class="project-card">

                <!-- Image -->
                <div class="project-image">
                    <div *ngIf="project.imageUrl; else placeholder">
                        <img [src]="project.imageUrl" [alt]="project.title"
                            (error)="$event.target.style.display='none'" />
                    </div>
                    <ng-template #placeholder>
                        <div class="placeholder-image">
                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve">
                                <path style="fill:#AA6100;" d="M456.348,512H55.652c-9.223,0-16.696-7.473-16.696-16.696V16.696C38.957,7.473,46.429,0,55.652,0
	h400.696c9.223,0,16.696,7.473,16.696,16.696v478.609C473.043,504.527,465.57,512,456.348,512z" />
                                <path style="fill:#884E00;" d="M456.348,512c4.611,0,8.785-1.868,11.807-4.888c3.021-3.022,4.888-7.196,4.888-11.807V256V16.696
	c0-4.611-1.868-8.785-4.888-11.807C465.133,1.868,460.959,0,456.348,0H256v512H456.348z" />
                                <path style="fill:#FF5023;" d="M389.571,200.348c-4.864,0-9.598-2.125-12.831-6.006l-42.827-51.39l-42.827,51.391
	c-4.506,5.392-11.918,7.386-18.511,5.011c-6.608-2.397-11.01-8.675-11.01-15.702V0h144.696v183.652
	c0,7.027-4.402,13.304-11.011,15.701C393.392,200.022,391.467,200.348,389.571,200.348z" />
                                <path style="fill:#CD2A00;" d="M333.913,142.952l42.827,51.391c3.233,3.88,7.967,6.006,12.831,6.006c1.897,0,3.821-0.326,5.68-0.995
	c6.608-2.397,11.01-8.675,11.01-15.702V0h-72.348V142.952z" />
                                <g>
                                    <path style="fill:#FFCD00;" d="M356.174,345.043H222.609c-9.223,0-16.696-7.473-16.696-16.696s7.473-16.696,16.696-16.696h133.565
		c9.223,0,16.696,7.473,16.696,16.696S365.397,345.043,356.174,345.043z" />
                                    <path style="fill:#FFCD00;" d="M389.565,411.826H189.217c-9.223,0-16.696-7.473-16.696-16.696c0-9.223,7.473-16.696,16.696-16.696
		h200.348c9.223,0,16.696,7.473,16.696,16.696C406.261,404.353,398.788,411.826,389.565,411.826z" />
                                </g>
                                <g>
                                    <path style="fill:#FFA733;" d="M389.565,378.435H256v33.391h133.565c9.223,0,16.696-7.473,16.696-16.696
		C406.261,385.908,398.788,378.435,389.565,378.435z" />
                                    <path style="fill:#FFA733;" d="M356.174,311.652H256v33.391h100.174c9.223,0,16.696-7.473,16.696-16.696
		S365.397,311.652,356.174,311.652z" />
                                </g>
                                <rect x="105.739" style="fill:#FFE6B3;" width="33.391" height="512" />
                            </svg>
                            <p class="placeholder-text">{{ project.title }}</p>
                        </div>
                    </ng-template>

                    <div class="project-overlay">
                        <div class="project-links">
                            <a *ngIf="hasLiveDemo(project)" [href]="project.liveUrl" target="_blank"
                                class="project-link demo" title="Ver Demo">
                                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                                </svg>
                            </a>
                            <a *ngIf="hasGitHub(project)" [href]="project.githubUrl" target="_blank"
                                class="project-link repo" title="Ver Código">
                                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                    <path
                                        d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                                </svg>
                            </a>
                        </div>
                    </div>

                    <!-- Featured Badge -->
                    <div *ngIf="project.isFeatured" class="featured-badge">
                        ⭐ Destacado
                    </div>
                </div>

                <!-- Content -->
                <div class="project-content">
                    <h3 class="project-title">{{ project.title }}</h3>
                    <p class="project-description">{{ project.description }}</p>

                    <!-- Duration -->
                    <div class="project-duration">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <span>{{ getProjectDuration(project) }}</span>
                    </div>

                    <!-- Technologies -->
                    <div class="project-technologies">
                        <span *ngFor="let tech of project.technologies.slice(0, 4)" class="tech-tag">
                            {{ tech }}
                        </span>
                        <span *ngIf="project.technologies.length > 4" class="tech-tag more">
                            +{{ project.technologies.length - 4 }}
                        </span>
                    </div>
                </div>

            </div>
        </div>

        <!-- Empty State -->
        <div *ngIf="filteredProjects().length === 0" class="empty-state">
            <svg width="64" height="64" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
            </svg>
            <h3>No hay proyectos en esta categoría</h3>
            <p>Intenta con otro filtro</p>
        </div>

    </div>
</section>